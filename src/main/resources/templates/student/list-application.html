<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:fragment="page" th:data-theme="${theme}">
  <head th:replace="~{components :: head('My Applications')}"></head>
  <body class="min-h-screen flex flex-col">
    <div th:replace="~{components :: student-navbar(${user.displayName()})}"></div>
    <main class="flex-grow container mx-auto p-4">
      <h1 class="text-2xl font-bold mb-4">My Applications</h1>
      <div class="overflow-x-auto">
        <table class="table table-zebra w-full text-lg">
          <thead>
            <tr>
              <th>
                <a th:href="@{'/applications?sort=title'}" class="cursor-pointer">Title</a>
              </th>
              <th>
                <a th:href="@{'/applications?sort=yearSemester'}" class="cursor-pointer">Year &amp; Semester</a>
              </th>
              <th>
                <a th:href="@{'/applications?sort=faculty'}" class="cursor-pointer">Faculty Lead(s)</a>
              </th>
              <th>
                <a th:href="@{'/applications?sort=dates'}" class="cursor-pointer">Dates</a>
              </th>
              <th>
                <a th:href="@{'/applications?sort=status'}" class="cursor-pointer">Status</a>
              </th>
            </tr>
          </thead>
          <tbody>
            <tr th:each="app, iterStat : ${apps}">
              <td>
                <a th:href="@{'/applications/' + ${app.id()}}" class="link">
                  <span th:text="${programs[iterStat.index].title()}">Program Title</span>
                </a>
              </td>
              <td th:text="${programs[iterStat.index].year()} + ' ' + ${programs[iterStat.index].semester()}">
                2025 Fall
              </td>
              <td th:text="${programs[iterStat.index].facultyLead()}">Dr. Smith, Dr. Jones</td>
              <td>
                <span th:text="'Start: ' + ${programs[iterStat.index].startDate()}"></span><br>
                <span th:text="'End: ' + ${programs[iterStat.index].endDate()}"></span>
              </td>
              <td>
                <span class="badge badge-primary" th:text="${app.status()}">Applied</span>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </main>
    <div th:replace="~{components :: footer}"></div>
  </body>
</html>
