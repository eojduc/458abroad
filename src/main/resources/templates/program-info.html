<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:fragment="page(program, applicationStatus, studentsEnrolled, alerts, formatter, user)">

  <head th:replace="~{components :: head(${program.title})}"></head>

  <body>
    <div th:replace="~{components :: navbar(${program.title}, ${user.displayName})}"></div>
    <div class="bg-base-100 flex flex-col items-center justify-center min-h-screen">
      <div th:replace="~{components :: alerts(${alerts})}"></div>
      <div class="card card-normal w-1/2 bg-base-200 m-4">
        <div class="card-body">
          <div class="flex flex-row justify-between">
            <h1 class="card-title" th:text="${program.title}"></h1>
            <div th:replace="~{components :: statusBadge(${applicationStatus})}"></div>
          </div>
          <p th:text="${program.description}"></p>
          <h2 class="text-lg mt-5">Faculty Lead</h2>
          <p class="mb-5" th:text="${program.facultyLead}"></p>
          <h2 class="text-lg mt-5">Program Details</h2>
          <table class="table table-sm">
            <tbody>
              <tr>
                <td>Term</td>
                <td th:text="${formatter.formatSemester(program.semester)} + ' ' + ${formatter.formatYear(program.year)}"></td>
              </tr>
              <tr>
                <td>Start Date</td>
                <td th:text="${formatter.formatLocalDate(program.startDate)}"></td>
              </tr>
              <tr>
                <td>End Date</td>
                <td th:text="${formatter.formatLocalDate(program.endDate)}"></td>
              </tr>
              <tr>
                <td>Students Enrolled</td>
                <td th:text="${studentsEnrolled}"></td>
              </tr>
              <tr>
                <td>Application Open</td>
                <td th:text="${formatter.formatInstant(program.applicationOpen)}"></td>
              </tr>
              <tr>
                <td>Application Deadline</td>
                <td th:text="${formatter.formatInstant(program.applicationClose)}"></td>
              </tr>
            </tbody>
          </table>
          <div class="flex flex-row-reverse">
            <a th:if="${applicationStatus == 'NOT_APPLIED'}"
              class="btn btn-primary w-1/4"
              th:href="@{/programs/{programId}/apply(programId=${program.id})}">Apply</a>
            <a th:unless = "${applicationStatus == 'NOT_APPLIED'}"
              class="btn btn-primary w-1/4"
              th:href="@{/applications/{applicationId}(applicationId=${program.id + '_' + user.username})}">View Application</a>
          </div>
        </div>
      </div>
    </div>
    <div th:replace="~{components :: footer}"></div>
  </body>
</html>